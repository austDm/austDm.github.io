(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,a,t){e.exports=t(40)},34:function(e,a,t){},40:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(25),o=t.n(r),c=(t(34),t(1)),l=t(13),i=t(2),m=t(3),u=t(5),d=t(4),g=t(6),p=t(12),v=t(21),h=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(g.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"scoreField"},s.a.createElement("div",{className:this.props.grannies<35?"grannies-counter":"grannies-counter grannies-counter--danger"},"Grannies: ",this.props.grannies," / 40"),s.a.createElement("div",null,"Time: ",this.props.gameTime,s.a.createElement("span",{className:"unit"}," sec")),s.a.createElement("div",null,"Score: ",this.props.score,s.a.createElement("span",{className:"unit"}," grannies")),s.a.createElement("div",null,"Speed: ",(this.props.score/this.props.gameTime||0).toFixed(2),s.a.createElement("span",{className:"unit"}," grannies/sec")))}}]),a}(s.a.Component),_="--right",E=function(e,a){return{boxShadow:e<20?"0 0 0 150rem rgba(0, 0, 0, 0), inset 0 0 1rem rgba(0, 0, 0, 0), inset 0 0 0.5rem rgba(0, 0, 0, 0)":e<30?"0 0 0 150rem rgba(0, 0, 0, 0.1), inset 0 0 1rem rgba(0, 0, 0, 0.1), inset 0 0 0.5rem rgba(0, 0, 0, 0.1)":"0 0 0 150rem rgba(0, 0, 0, 1), inset 0 0 1rem rgba(0, 0, 0, 0.95), inset 0 0 0.5rem rgba(0, 0, 0, 0.95)",left:"".concat(a[0],"px"),top:"".concat(a[1],"px")}},f=function(e){var a=e.direction,t=e.position,n=e.gameTime,r=e.heroIsMoving;return"LEFT"===a?_="--left":"RIGHT"===a&&(_="--right"),s.a.createElement("div",{className:"hero",style:E(n,t)},s.a.createElement("div",{className:r?"body running":"body"},s.a.createElement("div",{className:"head head".concat(_)}),s.a.createElement("div",{className:"leg_one leg_one".concat(_)}),s.a.createElement("div",{className:"leg_two leg_two".concat(_)})))},S=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(g.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"granny",style:{left:"".concat(this.props.info.position[0],"px"),top:"".concat(this.props.info.position[1],"px")}},s.a.createElement("div",{className:this.props.info.isMoving?"granny__body granny__running":"granny__body"},s.a.createElement("div",{className:"granny__head"}),s.a.createElement("div",{className:"granny__leg_one"}),s.a.createElement("div",{className:"granny__leg_two"})))}}]),a}(s.a.PureComponent),b=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(g.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"gameField"},s.a.createElement(f,{position:this.props.heroPosition,heroIsMoving:this.props.heroIsMoving,direction:this.props.direction,gameTime:this.props.gameTime}),this.props.grannies.map(function(e){return s.a.createElement(S,{info:e,key:e.name})}))}}]),a}(s.a.Component),N=function(e){var a=e.message;return s.a.createElement("div",{className:"login-notice"},s.a.createElement(c.b,{to:"/sign_in",className:"login-menu-link"},"SIGN IN"),s.a.createElement("div",{className:"login-notice-text"},a))},I=function(e){var a=e.isLoggedIn;return s.a.createElement("div",{className:"games__menu"},a&&s.a.createElement(c.b,{to:"/games/invasion",className:"game__link",activeClassName:"game__link--active"},"Elderly invasion"),s.a.createElement(c.b,{to:"/games/coins",className:"game__link",activeClassName:"game__link--active"},"Coins"),!a&&s.a.createElement(N,{message:"to get more games..."}))},y=[37,38,39,40],O=0,w=function(){return{position:[Math.trunc(1050*Math.random()),Math.trunc(550*Math.random())],name:"granny-".concat(O+=1)}},k=function(e){return new Array(e).fill(" ").map(function(){return w()})},T=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(s)))).state={heroPosition:[0,0],grannies:[],step:1,speed:10,heroIsMoving:!1,heroMovingTimer:null,grannyMovingTimer:null,gameTimer:null,gameTime:0,direction:null,score:0,grannyAppearanceTime:1e3,gameIsOver:!1,gameIsInProgress:!1,scores:null},t.moveHero=function(){var e=t.state,a=e.direction,n=e.heroPosition,s=e.step,r=Object(v.a)(n,2),o=r[0],c=r[1];switch(a){case"TOP":if((c-=s)<-90)return;break;case"BOTTOM":if((c+=s)>535)return;break;case"LEFT":if((o-=s)<-95)return;break;case"RIGHT":if((o+=s)>1050)return}var l=o+95,i=c+95,m=t.state.grannies.find(function(e){var a=e.position,t=Object(v.a)(a,2),n=t[0],s=t[1];return n<l+45&&n>l-85&&s<i+55&&s>i-85}),u=t.state.grannies,d=t.state.score;m&&(u=u.filter(function(e){return e!==m}),d+=1),t.setState({heroPosition:[o,c],grannies:u,score:d})},t.handleKeydown=function(e){var a=e.keyCode;if(y.includes(a)&&(e.preventDefault(),!t.state.heroIsMoving)){var n;switch(a){case 37:n="LEFT";break;case 38:n="TOP";break;case 39:n="RIGHT";break;case 40:n="BOTTOM"}var s=setInterval(function(){t.moveHero()},t.state.speed);t.setState({heroIsMoving:!0,direction:n,heroMovingTimer:s}),t.moveHero()}},t.handleKeyup=function(e){var a=e.keyCode;if(y.includes(a)&&t.state.heroIsMoving){var n=t.state.heroMovingTimer;clearInterval(n),t.setState({heroIsMoving:!1,heroMovingTimer:null,direction:null})}},t.endGame=function(){clearInterval(t.state.grannyMovingTimer),clearInterval(t.state.heroMovingTimer),clearInterval(t.state.gameTimer),t.setState(function(e){var a=e.score,n=e.gameTime,s=e.scores;console.log(a,n);var r={name:t.props.name,speed:(a/n||0).toFixed(3),date:(new Date).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"}),score:a};return{gameIsOver:!0,gameInProgress:!1,heroIsMoving:!1,heroMovingTimer:null,direction:null,scores:[].concat(Object(l.a)(s),[r])}}),window.removeEventListener("keydown",t.handleKeydown),window.removeEventListener("keyup",t.handleKeyup)},t.setGrannyAppearance=function(e){return setInterval(function(){var e=w();t.setState({grannies:[].concat(Object(l.a)(t.state.grannies),[e])}),t.state.grannies.length>=40&&t.endGame()},e)},t.startGame=function(){t.setState({grannies:k(1),gameTime:0,score:0,grannyAppearanceTime:1e3,speed:10,grannyMovingTimer:t.setGrannyAppearance(1e3)});var e=setInterval(function(){var e=t.state,a=e.gameTime,n=e.speed,s=e.grannyAppearanceTime,r=e.grannyMovingTimer;if(a&&a%15===0&&a<120&&n>2&&t.setState({speed:n-1.5}),a&&a%15===0){r&&clearInterval(r);var o=Math.trunc(.7*s);t.setState({grannyAppearanceTime:o,grannyMovingTimer:t.setGrannyAppearance(o)})}t.setState({gameTime:t.state.gameTime+1})},1e3);t.setState({gameTimer:e,gameIsOver:!1,gameIsInProgress:!0}),window.addEventListener("keydown",t.handleKeydown),window.addEventListener("keyup",t.handleKeyup)},t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setState({scores:JSON.parse(localStorage.getItem("scores"))||[]})}},{key:"componentWillUnmount",value:function(){localStorage.setItem("scores",JSON.stringify(this.state.scores)),window.removeEventListener("keydown",this.handleKeydown),window.removeEventListener("keyup",this.handleKeyup)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(I,{isLoggedIn:this.props.isLoggedIn}),s.a.createElement("div",{className:"game"},s.a.createElement("div",{className:"gameArea"},this.state.gameIsOver?s.a.createElement(j,{startGame:this.startGame}):this.state.gameIsInProgress?s.a.createElement(b,{direction:this.state.direction,heroPosition:this.state.heroPosition,heroIsMoving:this.state.heroIsMoving,grannies:this.state.grannies,gameIsInProgress:this.state.gameIsInProgress,gameTime:this.state.gameTime}):s.a.createElement(P,{startGame:this.startGame}),s.a.createElement(h,{score:this.state.score,grannies:this.state.grannies.length,gameTime:this.state.gameTime}))))}}]),a}(s.a.Component),P=function(e){var a=e.startGame;return s.a.createElement("div",{className:"game__menu"},"Save all cute grannies from the outer space.",s.a.createElement("button",{className:"game__start-button",onClick:a},"START GAME"))},j=function(e){var a=e.startGame;return s.a.createElement("div",{className:"gameOver"},"Game Over!",s.a.createElement("button",{className:"game__start-button",onClick:a},"START AGAIN"))},M=t(17),G=t(11),A=t(28),C=t.n(A),L=[{level:1,coins:3,delay:3e3},{level:2,coins:4,delay:2e3},{level:3,coins:5,delay:2e3},{level:4,coins:6,delay:3e3},{level:5,coins:7,delay:3500},{level:6,coins:7,delay:3e3},{level:7,coins:8,delay:3500},{level:8,coins:8,delay:3e3},{level:9,coins:9,delay:4e3},{level:10,coins:9,delay:3500},{level:"last",coins:12,delay:2500}],D=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(s)))).state={gameIsOver:!1,levelIsOver:!0,score:0,coins:[],idOrder:[],level:1,gameTimer:null,gameTime:0,scores:null},t.resetGame=function(){t.setState({level:1,gameIsOver:!1,levelIsOver:!1,score:0,levelDelay:null},t.gameInit)},t.levelOver=function(){t.setState({coins:t.state.coins.map(function(e){return Object(M.a)({},e,{opened:!0})}),gameIsOver:!1,levelIsOver:!0,level:t.state.level+1,score:t.state.score+500})},t.generatePositions=function(e){for(var a=[],n=0;n<e;n++)for(var s=function(){var e=t.generatePosition();if(a.every(function(a){return Math.abs(a[0]-e[0])>90||Math.abs(a[1]-e[1])>90}))return a.push(e),"break"};;){if("break"===s())break}return a},t.stepToNextCoin=function(e){console.dir(Object(G.a)(t));var a=t.state,n=a.idOrder,s=a.coins,r=a.score,o=a.level;if(1!==n.length){var c=s.length-n.length+1;t.setState({idOrder:n.slice(1),coins:s.map(function(a){return a.id===e?Object(M.a)({},a,{opened:!0,error:!1}):a}),score:r+5*c*o})}else t.levelOver()},t.handleUserMistake=function(){var e=t.state,a=e.idOrder,n=e.coins,s={score:t.state.score,name:t.props.name||"Shy girl"},r=[].concat(Object(l.a)(t.state.scores),[s]).sort(function(e,a){var t=e.score;return a.score-t});localStorage.setItem("coinsScores",JSON.stringify(r)),t.setState({idOrder:a.slice(1),coins:n.map(function(e){return e.opened?e:Object(M.a)({},e,{opened:!0,error:!0})}),gameIsOver:!0,levelDelay:null,scores:r})},t.checkCoin=function(e){var a=Object(G.a)(t),n=a.state.idOrder,s=a.stepToNextCoin,r=a.handleUserMistake;e===n[0]?s(e):r()},t.generateCoins=function(e){for(var a=[],n=t.generatePositions(e),s=0;s<e;s++){var r=C()("coin");a.push({id:r,onClick:t.checkCoin.bind(null,r),opened:!0,error:!1,position:n[s]})}return a},t.levelInit=function(e,a){var n=t.generateCoins(e);t.setState({levelIsOver:!1,coins:n,idOrder:n.map(function(e){return e.id}),levelDelay:a/1e3,gameTime:a/1e3,gameTimer:setInterval(function(){t.setState({gameTime:(t.state.gameTime-.01).toFixed(2)})},10)}),setTimeout(function(){var e=n.map(function(e){return Object(M.a)({},e,{opened:!1})});clearInterval(t.state.gameTimer),t.setState({coins:e,gameTime:0})},a)},t.gameInit=function(){var e=t.state.level,a=e>=L.length?"last":e,n=L.find(function(e){return e.level===a}),s=n.coins,r=n.delay;t.levelInit(s,r)},t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("coinsScores"))||[];this.setState({scores:e})}},{key:"generatePosition",value:function(){return[Math.round(55+635*Math.random()),Math.round(55+535*Math.random())]}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(I,{isLoggedIn:this.props.isLoggedIn}),s.a.createElement("div",{className:"coinsGame"},s.a.createElement(H,{coins:this.state.coins,gameIsOver:this.state.gameIsOver,levelIsOver:this.state.levelIsOver,level:this.state.level,gameInit:this.gameInit,resetGame:this.resetGame,gameTime:this.state.gameTime,levelDelay:this.state.levelDelay}),s.a.createElement(B,{score:this.state.score,scores:this.state.scores})))}}]),a}(s.a.Component),H=function(e){var a=e.levelIsOver,t=e.gameIsOver,n=e.coins,r=e.gameInit,o=e.level,c=e.resetGame,l=e.gameTime,i=e.levelDelay;return s.a.createElement("div",{className:"coinsGame__gameField"},a&&1===o&&s.a.createElement(R,{gameInit:r}),t&&s.a.createElement(V,{resetGame:c}),a&&1!==o&&s.a.createElement(F,{gameInit:r,level:o}),!t&&!a&&s.a.createElement(x,{gameTime:l,levelDelay:i}),n.map(function(e,t){var n=e.id,r=e.onClick,o=e.opened,c=e.error,l=e.position;return s.a.createElement("div",{className:"coinsGame__coin \n                ".concat(c&&"coinsGame__coin--error"," \n                ").concat(o?"coinsGame__coin--opened":"coinsGame__coin--closed"," \n                ").concat(a&&"coinsGame__coin--won","\n                "),onClick:o?null:r,key:n,style:{left:"".concat(l[0],"px"),top:"".concat(l[1],"px")}},o&&t+1)}))},R=function(e){var a=e.gameInit;return s.a.createElement("div",{className:"coinsGame__helloPage"},"Turn over all the coins starting from the first in terms of nominal value growth. With each level, the number of coins will increase, and the time for viewing will decrease.",s.a.createElement("div",{className:"coinsGame__helloPage__GL"},"Good luck!"),s.a.createElement("button",{className:"coinsGame__startLevel",onClick:a},"START"))},F=function(e){var a=e.level,t=e.gameInit;return s.a.createElement("div",{className:"coinsGame__levelNotification"},"Well done! Next level: ",a,s.a.createElement("button",{className:"coinsGame__startLevel",onClick:t},"START"))},V=function(e){var a=e.resetGame;return s.a.createElement("div",{className:"coinsGame__gameOverNotification"},"Game over",s.a.createElement("button",{className:"coinsGame__restartGame",onClick:a},"TRY AGAIN"))},x=function(e){var a=e.gameTime,t=e.levelDelay;return s.a.createElement("div",{className:"coinsGame__Timer",style:{width:a===t&&"100%",transitionDuration:"".concat(Math.trunc(t),"s")}})},B=function(e){var a=e.score,t=e.scores;return s.a.createElement("div",{className:"coinsGame__scoreField"},s.a.createElement("div",{className:"coinsGame__scoreField__currentScores"},"Score: ",a),s.a.createElement("table",{className:"coinsGame__scoreField__table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"coinsGame__scoreField__header"},"\u2116"),s.a.createElement("th",{className:"coinsGame__scoreField__header"},"Name"),s.a.createElement("th",{className:"coinsGame__scoreField__header"},"Scores"))),s.a.createElement("tbody",null,t&&t.slice(0,15).map(function(e,a){var t=e.score,n=e.name;return s.a.createElement("tr",{key:"".concat(n).concat(a)},s.a.createElement("td",null,a+1),s.a.createElement("td",null,n),s.a.createElement("td",null,t))}))))},W=function(){return s.a.createElement("div",{className:"not-found"},"404: Page Not Found :(")},U=function(e){var a=e.isLoggedIn;return s.a.createElement(s.a.Fragment,null,s.a.createElement("ul",{className:a?"headerNav headerNav--wideMenu":"headerNav"},s.a.createElement("li",{className:"headerNav__element"},s.a.createElement(c.b,{to:"/games",className:"headerNav__link",activeClassName:"activeRed"},"Games")),a&&s.a.createElement("li",{className:"headerNav__element"},s.a.createElement(c.b,{to:"/scores",className:"headerNav__link",activeClassName:"activeBlue"},"Scores"))))},K=function(e){var a=e.isLoggedIn,t=e.name;return s.a.createElement(s.a.Fragment,null,s.a.createElement(U,{isLoggedIn:a}),s.a.createElement("div",{className:"games"},s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/games",render:function(){return s.a.createElement(I,{isLoggedIn:a})}}),s.a.createElement(p.b,{path:"/games/invasion",render:function(){return a?s.a.createElement(T,{name:t,isLoggedIn:a}):s.a.createElement(N,{message:"to see this page..."})}}),s.a.createElement(p.b,{path:"/games/coins",render:function(){return s.a.createElement(D,{isLoggedIn:a,name:t})}}),s.a.createElement(p.b,{component:W}))))},J=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(s)))).state={scores:[],users:[]},t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setState({scores:JSON.parse(localStorage.getItem("scores"))||[],users:JSON.parse(localStorage.getItem("users"))||[]})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(U,{isLoggedIn:!0}),s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/scores",render:function(){return s.a.createElement(z,{scores:e.state.scores})}}),";",s.a.createElement(p.b,{exact:!0,path:"/scores/:username",render:function(a){return s.a.createElement($,Object.assign({},a,{scores:e.state.scores,users:e.state.users}))}}),";",s.a.createElement(p.b,{component:W})))}}]),a}(s.a.Component),$=function(e){console.dir(e);var a=e.match.params.username,t=e.scores;if(!e.users.find(function(e){var t=e.name;return a===t}))return s.a.createElement(W,null);var n=t.filter(function(e){var t=e.name;return a===t}),r=0,o=null;return n.forEach(function(e){var a=e.score,t=e.date;a>r&&(r=a,o=t)}),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"userScorePageTitle"},"User score page."),s.a.createElement("div",{className:"userScorePage"},s.a.createElement("div",{className:"userScorePage__img"}),s.a.createElement("div",{className:"userScorePage__infoBlock"},s.a.createElement("div",{className:"userScorePage__infoBlock__info"},"Name: ",a),s.a.createElement("div",{className:"userScorePage__infoBlock__info"},"Games played: ",n.length),Boolean(n.length)&&s.a.createElement("div",{className:"userScorePage__infoBlock__info"},"Best game scores: ",r),Boolean(n.length)&&s.a.createElement("div",{className:"userScorePage__infoBlock__info"},"Date of best game: ",o))))},z=function(e){var a=e.scores;return s.a.createElement("table",{className:"scoresTable"},s.a.createElement("thead",null,s.a.createElement(Y,null)),s.a.createElement("tbody",null,a.length?a.slice(0,15).sort(function(e,a){var t=e.score;return a.score-t}).map(function(e,a){var t=e.name,n=e.score,r=e.speed,o=e.date;return s.a.createElement(Z,{name:t,score:n,speed:r,date:o,key:"".concat(t).concat(a),position:a+1})}):s.a.createElement(q,null)))},Y=function(){return s.a.createElement("tr",{className:"scoresTable__header"},s.a.createElement("th",{className:"scoresTable__header__cell"},"\u2116"),s.a.createElement("th",{className:"scoresTable__header__cell"},"Name"),s.a.createElement("th",{className:"scoresTable__header__cell"},"Speed",s.a.createElement("span",{className:"unit"}," (grannies/sec)")),s.a.createElement("th",{className:"scoresTable__header__cell"},"Scores",s.a.createElement("span",{className:"unit"}," (grannies)")),s.a.createElement("th",{className:"scoresTable__header__cell"},"Date"))},Z=function(e){var a=e.name,t=e.score,n=e.speed,r=e.position,o=e.date;return s.a.createElement("tr",{className:"scoresTable__row"},s.a.createElement("td",{className:"scoresTable__row__cell"},r),s.a.createElement("td",{className:"scoresTable__row__cell"},s.a.createElement(c.b,{to:"/scores/".concat(a),className:"scoresTable__link"},a)),s.a.createElement("td",{className:"scoresTable__row__cell"},n),s.a.createElement("td",{className:"scoresTable__row__cell"},t),s.a.createElement("td",{className:"scoresTable__row__cell"},o))},q=function(){return s.a.createElement("tr",{className:"scoresTable__header"},s.a.createElement("td",{className:"scoresTable__header__no-scores",colSpan:"5"},"No saved scores :("))},Q=J,X=t(16),ee={nameIsBusy:"This name is already exist, choose another",nameDoesNotExist:"User with this name does not exist",wrongSymbols:"Wrong symbols, [A-Z, a-z, 0-9] symbols is allowed",invalidLengthName:"Name length should be 1 - 20 characters",passwordsDoesNotMatch:"Passwords doesn't match",invalidLengthPass:"Password length should be 4 - 20 characters",wrongPassword:"Wrong password",emptyPass:"Enter password",emptyName:"Enter name"},ae={clean:"CLEAN",valid:"VALID",error:"ERROR",editing:"EDITING"},te=function(e){function a(e){var t;Object(i.a)(this,a),(t=Object(u.a)(this,Object(d.a)(a).call(this,e))).clickHandler=function(){var e=t.state,a=e.nameInputValue,n=e.passwordInputValue;t.checkName(a),t.checkPasswordField(n),t.isValid()&&t.login()},t.login=function(){var e=t.props,a=e.users,n=e.history,s=e.changeLogStatus,r=t.state,o=r.nameInputValue,c=r.passwordInputValue,l=ee.wrongPassword,i=ae.error,m=a.find(function(e){return e.name===o});m.password===c?(s(m),n.replace("/games")):t.setState({passwordInputStatus:{type:i,message:l}})},t.checkName=function(e){var a=ee.nameDoesNotExist,n=ee.emptyName,s=ae.error,r=ae.valid;e?t.props.users.find(function(a){var t=a.name;return e===t})?t.setState({nameInputStatus:r}):t.setState({nameInputStatus:{type:s,message:a}}):t.setState({nameInputStatus:{type:s,message:n}})},t.changeInputHandler=function(e,a){var n=a.target.value,s="NAME"===e?"nameInputValue":"PASSWORD"===e&&"passwordInputValue";t.setState(Object(X.a)({},s,n))},t.focusHandler=function(e){var a="NAME"===e?"nameInputStatus":"PASSWORD"===e&&"passwordInputStatus",n=ae.editing;t.setState(Object(X.a)({},a,n))},t.checkPasswordField=function(e){var a=ae.valid,n=ae.error,s=ee.emptyPass;e?t.setState({passwordInputStatus:a}):t.setState({passwordInputStatus:{type:n,message:s}})},t.blurHandler=function(e){var a=t.state,n=a.nameInputValue,s=a.passwordInputValue;"NAME"===e?t.checkName(n):"PASSWORD"===e&&t.checkPasswordField(s)},t.isValid=function(){var e=ae.valid,a=ae.error,n=ae.clean,s=t.state,r=s.nameInputStatus,o=s.passwordInputStatus,c=s.passwordInputValue;return r===e&&o!==a&&o!==n&&c};var n=ae.clean;return t.state={nameInputValue:"",nameInputStatus:n,passwordInputValue:"",passwordInputStatus:n},t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=ae.error,a=this.state,t=a.nameInputStatus,n=a.passwordInputStatus,r=t.type,o=t.message,c=n.type,l=n.message;return s.a.createElement("div",{className:"login"},"Sign in",s.a.createElement("div",{className:"logon__input-title"},"Name"),s.a.createElement("div",{className:"message ".concat(r===e&&"message--error")},o),s.a.createElement("input",{type:"text",className:"login__input ".concat(r===e&&"login__input--error"),value:this.state.nameInputValue,onChange:this.changeInputHandler.bind(null,"NAME"),onFocus:this.focusHandler.bind(null,"NAME"),onBlur:this.blurHandler.bind(null,"NAME")}),s.a.createElement("div",{className:"logon__input-title"},"Password"),s.a.createElement("div",{className:"message ".concat(c===e&&"message--error")},l),s.a.createElement("input",{type:"password",className:"login__input ".concat(c===e&&"login__input--error"),value:this.state.passwordInputValue,onChange:this.changeInputHandler.bind(null,"PASSWORD"),onFocus:this.focusHandler.bind(null,"PASSWORD"),onBlur:this.blurHandler.bind(null,"PASSWORD")}),s.a.createElement("button",{className:"submit-button",onClick:this.clickHandler},"SUBMIT"))}}]),a}(s.a.Component),ne=Object(p.g)(te),se=function(e){function a(e){var t;Object(i.a)(this,a),(t=Object(u.a)(this,Object(d.a)(a).call(this,e))).clickHandler=function(){var e=t.state.inputValues,a=e.name,n=e.password,s=e.repeatPassword;t.checkName(a),t.checkPassword(n),t.checkRepeatPassword(s),t.isValid()&&t.logon()},t.logon=function(){var e=t.state.inputValues,a=e.name,n=e.password,s=t.props,r=s.addUser,o=s.changeLogStatus,c=s.history;if(t.isValid()){var l={name:a,password:n};r(l),o(l),c.replace("/games")}},t.setInputValue=function(e,a){var n=t.state.inputValues,s=ae.clean;switch(e){case"NAME":return void t.setState({inputValues:{name:a,password:n.password,repeatPassword:n.repeatPassword}});case"PASSWORD":return void t.setState({inputValues:{name:n.name,password:a,repeatPassword:""},checkPassInputStatus:s});case"CHECKPASSWORD":return void t.setState({inputValues:{name:n.name,password:n.password,repeatPassword:a}});default:return}},t.checkName=function(e){var a=ae.valid,n=ae.error,s=ee.wrongSymbols,r=ee.nameIsBusy,o=ee.invalidLengthName,c=ee.emptyName,l=t.props.users;if(console.log(1),e)if(l&&t.isUserNameBusy(l,e))t.setState({nameInputStatus:{type:n,message:r}});else if(/(^\w*$)/.test(e)){var i=e.length;0===i||i>20?t.setState({nameInputStatus:{type:n,message:o}}):t.setState({nameInputStatus:a})}else t.setState({nameInputStatus:{type:n,message:s}});else t.setState({nameInputStatus:{type:n,message:c}})},t.changeHandler=function(e,a){var n=a.target.value;(0,Object(G.a)(t).setInputValue)(e,n)},t.checkRepeatPassword=function(e){var a=ae.valid,n=ae.error,s=t.state.inputValues.password,r=ee.passwordsDoesNotMatch;e&&e===s?t.setState({checkPassInputStatus:a}):t.setState({checkPassInputStatus:{type:n,message:r}})},t.checkPassword=function(e){var a=ae.valid,n=ae.error,s=ee.wrongSymbols,r=ee.invalidLengthPass;ee.wrongPassword;if(/(^\w*$)/.test(e)&&e){var o=e.length;o<4||o>10?t.setState({passInputStatus:{type:n,message:r}}):t.setState({passInputStatus:a})}else t.setState({passInputStatus:{type:n,message:s}})},t.blurHandler=function(e,a){var n=a.target.value,s=Object(G.a)(t),r=s.checkName,o=s.checkPassword,c=s.checkRepeatPassword;switch(e){case"NAME":return void r(n);case"PASSWORD":return void o(n);case"CHECKPASSWORD":return void c(n);default:return}},t.focusHandler=function(e){var a=ae.editing;switch(e){case"NAME":return void t.setState({nameInputStatus:a});case"PASSWORD":return void t.setState({passInputStatus:a});case"CHECKPASSWORD":return void t.setState({checkPassInputStatus:a});default:return}},t.isValid=function(){var e=t.state,a=e.nameInputStatus,n=e.passInputStatus,s=e.checkPassInputStatus,r=ae.valid,o=ae.clean;return console.log(a,n,s),a!==o&&n!==o&&!s!==o&&[a,n,s].some(function(e){return e!==r})};var n=ae.clean;return t.state={inputValues:{name:"",password:"",repeatPassword:""},nameInputStatus:n,passInputStatus:n,checkPassInputStatus:n},t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"isUserNameBusy",value:function(e,a){return e&&e.some(function(e){var t=e.name;return a===t})}},{key:"render",value:function(){var e=this.state,a=e.inputValues,t=e.nameInputStatus,n=e.passInputStatus,r=e.checkPassInputStatus,o=t.type,c=t.message,l=n.type,i=n.message,m=r.type,u=r.message,d=ae.error,g=ae.valid;return s.a.createElement("div",{className:"logon"},"Sign Up",s.a.createElement("div",{className:"logon__input-title ".concat(t===g&&"logon__input-title--valid")},"Name"),s.a.createElement("div",{className:"message ".concat(o&&o===d&&"message--error")},c),s.a.createElement("input",{type:"text",className:"logon__input ".concat((t===g?"logon__input--valid":o&&o===d&&"logon__input--error")||""),onChange:this.changeHandler.bind(null,"NAME"),onBlur:this.blurHandler.bind(null,"NAME"),onFocus:this.focusHandler.bind(null,"NAME"),value:a.name}),s.a.createElement("div",{className:"logon__input-title ".concat(n===g&&"logon__input-title--valid")},"Password"),s.a.createElement("div",{className:"message ".concat(l&&l===d&&"message--error")},i),s.a.createElement("input",{type:"password",className:"logon__input ".concat((n===g?"logon__input--valid":l&&l===d&&"logon__input--error")||""),onChange:this.changeHandler.bind(null,"PASSWORD"),onBlur:this.blurHandler.bind(null,"PASSWORD"),onFocus:this.focusHandler.bind(null,"PASSWORD"),value:a.password}),s.a.createElement("div",{className:"logon__input-title ".concat(r===g&&"logon__input-title--valid")},"Repeat Password"),s.a.createElement("div",{className:"message ".concat(m&&m===d&&"message--error")},u),s.a.createElement("input",{type:"password",className:"logon__input ".concat((r===g?"logon__input--valid":m&&m===d&&"logon__input--error")||""),onChange:this.changeHandler.bind(null,"CHECKPASSWORD"),onBlur:this.blurHandler.bind(null,"CHECKPASSWORD"),onFocus:this.focusHandler.bind(null,"CHECKPASSWORD"),value:a.repeatPassword}),s.a.createElement("button",{className:"submit-button",onClick:this.clickHandler},"SUBMIT"))}}]),a}(s.a.Component),re=Object(p.g)(se),oe=function(e){var a=e.isLoggedIn,t=e.name,n=e.logout;return a?s.a.createElement("div",{className:"header__log"},"*/}",s.a.createElement(c.b,{to:"/scores/".concat(t),className:"header__log-name"},t),s.a.createElement("button",{className:"logout-button",onClick:n},"SIGN OUT")):s.a.createElement("div",{className:"header__log"},s.a.createElement(c.b,{to:"/sign_in",className:"login-link",onClick:n},"SIGN IN"),s.a.createElement(c.b,{to:"/sign_up",className:"logon-link",onClick:n},"SIGN UP"))},ce=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(d.a)(a).call(this,e))).changeLogStatus=function(e){e?(t.setState({isLoggedIn:!0,name:e.name}),localStorage.setItem("loggedUser",JSON.stringify(e))):(t.setState({isLoggedIn:!1,name:null}),localStorage.setItem("loggedUser",""))},t.addUser=function(e){var a=[].concat(Object(l.a)(t.state.users),[e]);t.setState({users:a}),localStorage.setItem("users",JSON.stringify(a))},t.logout=function(){t.changeLogStatus(),t.props.history.push("/sign_in")},t.state={isLoggedIn:!1,name:null,users:null},t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setState({users:JSON.parse(localStorage.getItem("users"))||[]});var e=localStorage.getItem("loggedUser");e?this.setState({isLoggedIn:!0,name:JSON.parse(e).name}):this.setState({isLoggedIn:!1})}},{key:"render",value:function(){var e=this,a=this.state,t=a.isLoggedIn,n=a.name;return s.a.createElement(s.a.Fragment,null,s.a.createElement(oe,{isLoggedIn:t,name:n,logout:this.logout}),s.a.createElement(p.d,null,s.a.createElement(p.a,{exact:!0,from:"/",to:"/games"}),s.a.createElement(p.b,{path:"/games",render:function(){return s.a.createElement(K,{isLoggedIn:t,name:n})}}),s.a.createElement(p.b,{path:"/scores",render:function(){return t?s.a.createElement(Q,null):s.a.createElement(N,{message:"to see this page..."})}}),s.a.createElement(p.b,{path:"/sign_in",render:function(){return t?s.a.createElement(p.a,{to:"./games"}):s.a.createElement(ne,{users:e.state.users,changeLogStatus:e.changeLogStatus})}}),s.a.createElement(p.b,{path:"/sign_up",render:function(){return t?s.a.createElement(p.a,{to:"./games"}):s.a.createElement(re,{users:e.state.users,addUser:e.addUser,changeLogStatus:e.changeLogStatus})}}),s.a.createElement(p.b,{component:W})))}}]),a}(s.a.Component),le=Object(p.g)(ce),ie=function(){return s.a.createElement(c.a,null,s.a.createElement("div",{className:"app"},s.a.createElement(le,null)))};o.a.render(s.a.createElement(ie,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.e8f0d88d.chunk.js.map